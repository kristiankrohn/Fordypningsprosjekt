from sklearn import datasets, neighbors
import numpy as np
import matplotlib.pyplot as plt
from sklearn.multiclass import OneVsRestClassifier
from sklearn.svm import LinearSVC
from sklearn import svm
from sklearn.cluster import KMeans
from sklearn.externals import joblib #in order to store the svm


file = open('data.txt', 'r')
convertedDataSet = [[]]

print(convertedDataSet)

AllData = file.read()
DataSet = []
DataSet = AllData.split(':')
#print(DataSet)
for i in range(len(DataSet)):

    feature = []
    feature = DataSet[i].split(',')
    featuretype = feature[0]
    feature.pop(0)
    #print("Featuretype = ")
    #print(featuretype)
    #print("Featuredata = ")
    #print(feature)
    convertedDataSet.append(map(float, feature))
    if i == (len(DataSet) - 1):
        convertedDataSet.pop(0)
        convertedDataSet.pop(len(DataSet) -1)
        print(convertedDataSet)
    #if i == 2:
        #convertedDataSet = filter(None, convertedDataSet)
        #print(convertedDataSet)

#for i in range(len(dataset)):
#print(convertedDataSet[0])

#print(convertedDataSet)


#legend, = plt.plot(dataset, label=label)
#legends.append(legend)
#plt.ylabel('uV')
#plt.xlabel('Sample')
#plt.legend(handles=legends)
#legends = []
#plt.show()
#iris = datasets.load_iris()
#X, y = iris.data, iris.target
X = np.array(convertedDataSet)

Y = np.array([0,1,1,2,4,3,5,1,2,3,4,1,2,3,4,1,2,3])

#clf = LinearSVC()

clf = joblib.load('machinestate.pkl')#loads the machine-learning state

clf.fit(X,Y)
joblib.dump(clf, 'machineState.pkl')#saves the machine-learning state

print(clf.predict([[
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1,

                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    3,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    4,
                    2,
                    1,
                    2,
                    3,
                    4,
                    5,
                    4,
                    3,
                    2,
                    5,
                    2,
                    3,
                    5,
                    1]]))
